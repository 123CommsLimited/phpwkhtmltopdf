<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>PHP WkHtmlToPdf by mikehaertl</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/mikehaertl/phpwkhtmltopdf">Fork On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/mikehaertl/phpwkhtmltopdf/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/mikehaertl/phpwkhtmltopdf/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>PHP WkHtmlToPdf</h1>
          <p>A slim PHP wrapper around wkhtmltopdf with an easy to use and clean OOP interface</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/mikehaertl">mikehaertl</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></span>
        </div>

        <p>PHP WkHtmlToPdf provides a simple and clean interface to ease PDF creation with <a href="http://code.google.com/p/wkhtmltopdf/">wkhtmltopdf</a>.
The <a href="http://code.google.com/p/wkhtmltopdf/">wkhtmltopdf</a> binary must be installed and working on your system. The static
binary is preferred but this class should also work with the non static version,
even though a lot of features will be missing.</p>

<p>This project is sponsored by <a href="http://www.peopleperhour.com">PeoplePerHour</a>.</p>

<h2>Basic use</h2>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'WkHtmlToPdf.php'</span><span class="p">);</span>

<span class="nv">$pdf</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WkHtmlToPdf</span><span class="p">;</span>
<span class="nv">$pdf</span><span class="o">-&gt;</span><span class="na">addPage</span><span class="p">(</span><span class="s1">'http://google.com'</span><span class="p">);</span>
<span class="nv">$pdf</span><span class="o">-&gt;</span><span class="na">addPage</span><span class="p">(</span><span class="s1">'/home/joe/my.pdf'</span><span class="p">);</span>
<span class="nv">$pdf</span><span class="o">-&gt;</span><span class="na">addCover</span><span class="p">(</span><span class="s1">'mycover.pdf'</span><span class="p">);</span>
<span class="nv">$pdf</span><span class="o">-&gt;</span><span class="na">addToc</span><span class="p">();</span>

<span class="c1">// Save the PDF</span>
<span class="nv">$pdf</span><span class="o">-&gt;</span><span class="na">saveAs</span><span class="p">(</span><span class="s1">'/tmp/new.pdf'</span><span class="p">);</span>

<span class="c1">// Send to client for inline display</span>
<span class="nv">$pdf</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">();</span>

<span class="c1">// Send to client as file download</span>
<span class="nv">$pdf</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="s1">'test.pdf'</span><span class="p">);</span>
</pre>
</div>


<h2>Setting options</h2>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>
<span class="nv">$pdf</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WkHtmlToPdf</span><span class="p">(</span><span class="nv">$options</span><span class="p">);</span>   <span class="c1">// Set global PDF options</span>
<span class="nv">$pdf</span><span class="o">-&gt;</span><span class="na">setOptions</span><span class="p">(</span><span class="nv">$options</span><span class="p">);</span>         <span class="c1">// Set global PDF options (alternative)</span>
<span class="nv">$pdf</span><span class="o">-&gt;</span><span class="na">setPageOptions</span><span class="p">(</span><span class="nv">$options</span><span class="p">);</span>     <span class="c1">// Set global default page options</span>
<span class="nv">$pdf</span><span class="o">-&gt;</span><span class="na">addPage</span><span class="p">(</span><span class="nv">$page</span><span class="p">,</span> <span class="nv">$options</span><span class="p">);</span>     <span class="c1">// Set page options (overrides defaults)</span>
</pre>
</div>


<h3>Example options</h3>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>
<span class="c1">// See "wkhtmltopdf -H" for all available options</span>
<span class="nv">$options</span><span class="o">=</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'no-outline'</span><span class="p">,</span>
    <span class="s1">'margin-top'</span>    <span class="o">=&gt;</span><span class="mi">0</span><span class="p">,</span>
    <span class="s1">'margin-right'</span>  <span class="o">=&gt;</span><span class="mi">0</span><span class="p">,</span>
<span class="p">);</span>
</pre>
</div>


<h3>Extra global options</h3>

<ul>
<li>bin: path to the wkhtmltopdf binary. Defaults to <code>/usr/bin/wkhtmltopdf</code>.</li>
<li>tmp: path to tmp directory. Defaults to PHP temp dir.</li>
</ul><h2>Error handling</h2>

<p><code>saveAs()</code> and <code>save()</code> will return false on error. In this case the detailed error message from wkhtmltopdf can be obtained through <code>getError()</code>.</p>

<h2>Full example</h2>

<p>For me <code>wkhtmltopdf</code> seems to create best results with smart shrinking turned off. 
But then i had scaling issues which went away if i set all margins to zero and instead
add the margins through CSS. We can also use <code>cm</code> in CSS as this is more apropriate for print styles.</p>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>
<span class="nv">$pdf</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WkHtmlToPdf</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'no-outline'</span><span class="p">,</span>         <span class="c1">// Make Chrome not complain</span>
    <span class="s1">'margin-top'</span>    <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">'margin-right'</span>  <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">'margin-bottom'</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">'margin-left'</span>   <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">);</span>

<span class="nv">$pdf</span><span class="o">-&gt;</span><span class="na">setPageOptions</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'disable-smart-shrinking'</span><span class="p">,</span>
    <span class="s1">'user-style-sheet'</span> <span class="o">=&gt;</span> <span class="s1">'pdf.css'</span><span class="p">,</span>
<span class="p">);</span>

<span class="nv">$pdf</span><span class="o">-&gt;</span><span class="na">addPage</span><span class="p">(</span><span class="s1">'demo.html'</span><span class="p">);</span>

<span class="nv">$pdf</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">();</span>
</pre>
</div>


<p><strong>demo.html</strong></p>

<div class="highlight">
<pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"print-area"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"header"</span><span class="nt">&gt;</span>
            This is an example header.
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"content"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;h1&gt;</span>Demo<span class="nt">&lt;/h1&gt;</span>
            <span class="nt">&lt;p&gt;</span>This is example content<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"footer"</span><span class="nt">&gt;</span>
            This is an example footer.
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre>
</div>


<p><strong>pdf.css</strong></p>

<div class="highlight">
<pre><span class="c">/* Define page size. Requires print-area adjustment! */</span>
<span class="nt">body</span> <span class="p">{</span>
    <span class="k">margin</span><span class="o">:</span>     <span class="m">0</span><span class="p">;</span>
    <span class="k">padding</span><span class="o">:</span>    <span class="m">0</span><span class="p">;</span>
    <span class="k">width</span><span class="o">:</span>      <span class="m">21cm</span><span class="p">;</span>
    <span class="k">height</span><span class="o">:</span>     <span class="m">29.7cm</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* Printable area */</span>
<span class="nf">#print-area</span> <span class="p">{</span>
    <span class="k">position</span><span class="o">:</span>   <span class="k">relative</span><span class="p">;</span>
    <span class="k">top</span><span class="o">:</span>        <span class="m">1cm</span><span class="p">;</span>
    <span class="k">left</span><span class="o">:</span>       <span class="m">1cm</span><span class="p">;</span>
    <span class="k">width</span><span class="o">:</span>      <span class="m">19cm</span><span class="p">;</span>
    <span class="k">height</span><span class="o">:</span>     <span class="m">27.6cm</span><span class="p">;</span>

    <span class="k">font-size</span><span class="o">:</span>      <span class="m">10px</span><span class="p">;</span>
    <span class="k">font-family</span><span class="o">:</span>    <span class="n">Arial</span><span class="p">;</span>
<span class="p">}</span>

<span class="nf">#header</span> <span class="p">{</span>
    <span class="k">height</span><span class="o">:</span>     <span class="m">3cm</span><span class="p">;</span>

    <span class="k">background</span><span class="o">:</span> <span class="m">#ccc</span><span class="p">;</span>
<span class="p">}</span>
<span class="nf">#footer</span> <span class="p">{</span>
    <span class="k">position</span><span class="o">:</span>   <span class="k">absolute</span><span class="p">;</span>
    <span class="k">bottom</span><span class="o">:</span>     <span class="m">0</span><span class="p">;</span>
    <span class="k">width</span><span class="o">:</span>      <span class="m">100</span><span class="o">%</span><span class="p">;</span>
    <span class="k">height</span><span class="o">:</span>     <span class="m">3cm</span><span class="p">;</span>

    <span class="k">background</span><span class="o">:</span> <span class="m">#ccc</span><span class="p">;</span>
<span class="p">}</span>
</pre>
</div>

      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-31221500-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>